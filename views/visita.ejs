<%- include('partials/header', { title: 'Visita' }) %>

<section class="card" style="max-width: 860px; margin: 0 auto;">
  <div class="card-hd">
    <h1 class="card-title">Visita #<%= item.Id || item.id %></h1>
    <p class="card-subtitle">Detalle de la visita.</p>
  </div>
  <div class="card-bd">
    <div class="kpi">
      <span class="pill">Fecha: <%= (item[meta.colFecha] || item.Fecha || '').toString().slice(0,10) %></span>
      <span class="pill">Hora: <%= (item[meta.colHora] || item.Hora || '').toString().slice(0,5) %></span>
      <span class="pill">Tipo: <%= item[meta.colTipo] || item.TipoVisita || '—' %></span>
      <span class="pill">Estado: <%= item[meta.colEstado] || item.Estado || '—' %></span>
    </div>

    <div style="margin-top: 14px;" class="table-wrap">
      <table>
        <thead>
          <tr><th>Campo</th><th>Valor</th></tr>
        </thead>
        <tbody>
          <% Object.keys(item || {}).forEach((k) => { %>
            <tr>
              <td style="font-weight:700;"><%= k %></td>
              <td><%= (item[k] === null || item[k] === undefined) ? '' : String(item[k]) %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

    <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; margin-top: 12px;">
      <a class="btn secondary" href="/visitas">Volver</a>
      <a class="btn secondary" href="/visitas/<%= item.Id || item.id %>/edit">Editar</a>
      <form method="post" action="/visitas/<%= item.Id || item.id %>/delete" style="display:inline;" onsubmit="return confirm('¿Eliminar esta visita?');">
        <button class="btn secondary" style="border-color: rgba(255,186,0,.6);" type="submit">Borrar</button>
      </form>
    </div>
  </div>
</section>

<%- include('partials/footer') %>

