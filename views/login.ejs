<%- include('partials/header', { title: 'Login', headerVariant: 'login' }) %>

<section class="login-hero">
  <div class="login-hero-inner">
    <h1 class="login-title">Acceso de comerciales</h1>
    <p class="login-subtitle">
      Revisa tu cartera, registra visitas y controla pedidos en un solo lugar.
    </p>
    <div class="login-highlights">
      <span class="badge info">Clientes</span>
      <span class="badge info">Pedidos</span>
      <span class="badge info">Visitas</span>
    </div>
  </div>
</section>

<section class="card login-card">
  <div class="card-hd">
    <h2 class="card-title" style="font-size: 20px;">Iniciar sesión</h2>
    <p class="card-subtitle">Entra con tu email y contraseña.</p>
  </div>
  <div class="card-bd">
    <% if (error) { %>
      <div class="gv-alert gv-alert--warn"><%= error %></div>
      <div style="height: 10px;"></div>
    <% } %>
    <% if (typeof restablecido !== 'undefined' && restablecido) { %>
      <div class="gv-alert gv-alert--success">Contraseña restablecida. Ya puedes iniciar sesión con tu nueva contraseña.</div>
      <div style="height: 10px;"></div>
    <% } %>

    <form method="post" action="/login" class="login-form">
      <label style="display:grid; gap: 6px;">
        <span style="font-weight:700; color: var(--gv-ink); font-size: 13px;">Email</span>
        <input name="email" type="email" autocomplete="username" required />
      </label>

      <label style="display:grid; gap: 6px;">
        <span style="font-weight:700; color: var(--gv-ink); font-size: 13px;">Contraseña</span>
        <div class="gv-password-wrap" style="position:relative;">
          <input name="password" type="password" autocomplete="current-password" required id="login-password" />
          <button type="button" class="gv-password-toggle" aria-label="Mostrar contraseña" title="Mostrar contraseña" tabindex="-1">
            <svg class="gv-eye-open" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
            <svg class="gv-eye-closed" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none;"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/></svg>
          </button>
        </div>
      </label>

      <button class="btn" type="submit" style="justify-content:center;">Entrar</button>

      <p style="margin:14px 0 0 0; font-size: 13px;">
        <a href="/login/olvidar-contrasena" style="color: var(--gv-link, #008bd2);">¿Olvidaste tu contraseña?</a>
      </p>
    </form>
  </div>
</section>

<style>
.gv-password-wrap { display: flex; align-items: center; }
.gv-password-wrap input { flex: 1; padding-right: 44px; }
.gv-password-toggle {
  position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
  background: none; border: none; cursor: pointer; padding: 4px; color: #666;
  display: flex; align-items: center; justify-content: center;
}
.gv-password-toggle:hover { color: var(--gv-ink, #333); }
</style>
<script>
(function(){
  var btn = document.querySelector('.gv-password-toggle');
  var input = document.getElementById('login-password');
  var eyeOpen = btn && btn.querySelector('.gv-eye-open');
  var eyeClosed = btn && btn.querySelector('.gv-eye-closed');
  if (!btn || !input) return;
  btn.addEventListener('click', function(){
    var isPass = input.type === 'password';
    input.type = isPass ? 'text' : 'password';
    btn.setAttribute('aria-label', isPass ? 'Ocultar contraseña' : 'Mostrar contraseña');
    btn.setAttribute('title', isPass ? 'Ocultar contraseña' : 'Mostrar contraseña');
    if (eyeOpen) eyeOpen.style.display = isPass ? 'none' : '';
    if (eyeClosed) eyeClosed.style.display = isPass ? '' : 'none';
  });
})();
</script>
<%- include('partials/footer') %>

